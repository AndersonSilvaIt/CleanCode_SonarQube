Š
aD:\Anderson\Estudos\Estudos_C#\CleanCode_SonarQube\AnimalManager.API\AnimalManager.API\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddDbContext 
< 
AppDbContext *
>* +
(+ ,
options, 3
=>4 6
{ 
options 
. 
	UseSqlite 
( 
builder 
. 
Configuration +
.+ ,
GetConnectionString, ?
(? @
$str@ H
)H I
)I J
;J K
} 
) 
; 
builder 
. 
Services 
. 
	AddScoped 
( 
typeof !
(! "
IRepository" -
<- .
>. /
)/ 0
,0 1
typeof2 8
(8 9

Repository9 C
<C D
>D E
)E F
)F G
;G H
builder 
. 
Services 
. 
	AddScoped 
< 
IAnimalService )
,) *
AnimalService+ 8
>8 9
(9 :
): ;
;; <
builder 
. 
Services 
. 
AddAutoMapper 
( 
	AppDomain (
.( )
CurrentDomain) 6
.6 7
GetAssemblies7 D
(D E
)E F
)F G
;G H
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. /
#AddValidatorsFromAssemblyContaining 4
<4 5
AnimalDtoValidator5 G
>G H
(H I
)I J
;J K
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{   
app!! 
.!! 

UseSwagger!! 
(!! 
)!! 
;!! 
app"" 
."" 
UseSwaggerUI"" 
("" 
)"" 
;"" 
}## 
app%% 
.%% 
UseHttpsRedirection%% 
(%% 
)%% 
;%% 
app'' 
.'' 
UseAuthorization'' 
('' 
)'' 
;'' 
app)) 
.)) 
MapControllers)) 
()) 
))) 
;)) 
await++ 
app++ 	
.++	 

RunAsync++
 
(++ 
)++ 
;++ Î'
vD:\Anderson\Estudos\Estudos_C#\CleanCode_SonarQube\AnimalManager.API\AnimalManager.API\Controllers\AnimalController.cs
	namespace 	
AnimalManager
 
. 
API 
. 
Controllers '
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public		 

class		 
AnimalController		 !
:		" #
ControllerBase		$ 2
{

 
private 
readonly 
IAnimalService '
_animalService( 6
;6 7
public 
AnimalController 
(  
IAnimalService  .
service/ 6
)6 7
{ 	
_animalService 
= 
service $
;$ %
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetAll) /
(/ 0
)0 1
{ 	
return 
Ok 
( 
await 
_animalService *
.* +
GetAllAsync+ 6
(6 7
)7 8
)8 9
;9 :
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetById) 0
(0 1
Guid1 5
id6 8
)8 9
{ 	
return 
Ok 
( 
await 
_animalService *
.* +
GetByIdAsync+ 7
(7 8
id8 :
): ;
); <
;< =
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Create) /
(/ 0
[0 1
FromBody1 9
]9 :
	AnimalDto; D
	animalDtoE N
)N O
{   	
var!! 
result!! 
=!! 
await!! 
_animalService!! -
.!!- .
AddAsync!!. 6
(!!6 7
	animalDto!!7 @
)!!@ A
;!!A B
if## 
(## 
!## 
result## 
.## 
	IsSuccess## !
)##! "
return### )

BadRequest##* 4
(##4 5
new##5 8
{##9 :
Errors##; A
=##B C
result##D J
.##J K
Errors##K Q
}##R S
)##S T
;##T U
return%% 
Created%% 
(%% 
$str%% 
,%% 
result%% %
.%%% &
Data%%& *
)%%* +
;%%+ ,
}&& 	
[(( 	
HttpPut((	 
((( 
$str(( 
)(( 
](( 
public)) 
async)) 
Task)) 
<)) 
IActionResult)) '
>))' (
Update))) /
())/ 0
Guid))0 4
id))5 7
,))7 8
[))9 :
FromBody)): B
]))B C
	AnimalDto))D M
	animalDto))N W
)))W X
{** 	
if++ 
(++ 
id++ 
!=++ 
	animalDto++ 
.++  
Id++  "
)++" #
{,, 
return-- 

BadRequest-- !
(--! "
new--" %
{--& '
Errors--( .
=--/ 0
new--1 4
[--4 5
]--5 6
{--7 8
$str--9 M
}--N O
}--P Q
)--Q R
;--R S
}.. 
var00 
result00 
=00 
await00 
_animalService00 -
.00- .
UpdateAsync00. 9
(009 :
id00: <
,00< =
	animalDto00> G
)00G H
;00H I
if22 
(22 
!22 
result22 
.22 
	IsSuccess22 !
)22! "
return22# )

BadRequest22* 4
(224 5
new225 8
{229 :
Errors22; A
=22B C
result22D J
.22J K
Errors22K Q
}22R S
)22S T
;22T U
return44 
	NoContent44 
(44 
)44 
;44 
}55 	
[77 	

HttpDelete77	 
(77 
$str77 
)77 
]77 
public88 
async88 
Task88 
<88 
IActionResult88 '
>88' (
Delete88) /
(88/ 0
Guid880 4
id885 7
)887 8
{99 	
await:: 
_animalService::  
.::  !
DeleteAsync::! ,
(::, -
id::- /
)::/ 0
;::0 1
return;; 
	NoContent;; 
(;; 
);; 
;;; 
}<< 	
}== 
}>> 